---
# This playbook install a hosts file for all the hosts

#TODO Remove in future versions
- name: Remove vagrant-hostmanager entries
  tags:
    - common
    - hosts
  ansible.builtin.blockinfile:
    path: /etc/hosts
    state: absent
    marker: "## {mark}"
    marker_begin: "vagrant-hostmanager-start"
    marker_end: "vagrant-hostmanager-end"
  become: true
  become_user: root

- name: Add splunk hosts to /etc/hosts
  tags:
    - common
    - hosts
  ansible.builtin.blockinfile:
    path: /etc/hosts
    block: |
      {{ splunk_hosts_entries }}
    marker: "# {mark} SPLUNKENIZER MANAGED BLOCK (splunk hosts)"
  become: true
  become_user: root
